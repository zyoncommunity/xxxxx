(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1319:function(t,e,s){"use strict";s.r(e);s(28),s(26);var a=s(1),r=s.n(a),i=(s(46),s(51),s(106),s(34),s(12)),n=s.n(i),o=(s(65),s(486),s(100),s(17),s(66),s(27)),c=s(171),l={props:{bot:{type:Object,required:!0},search:Object},data:function(){for(var t={details:{}},e=Object.keys(this.search),s=0;s<e.length;s++){var a=e[s];Array.isArray(this.search[a])?t.details[a]=Array.from(this.search[a]):t.details[a]=this.search[a]}return t},computed:n()({},Object(o.b)(["user","isAuthenticated"]),{totalWeeklyVotes:function(){return this.bot.votes?this.bot.votes.slice(0,-1).reduce(function(t,e){return t+e.votes},0):0},totalWeeklyInvites:function(){return this.bot.invites?this.bot.invites.slice(0,-1).reduce(function(t,e){return t+e.invites},0):0},markedDescription:function(){return this.details&&this.details.description?Object(c.b)(this.bot.description).replace(new RegExp(Object(c.c)(this.details.description),"gi"),"<mark>$&</mark>"):this.bot.description},matchedTags:function(){var t=this;return this.bot.tags.filter(function(e){return t.details.tags.includes(e.type)})},avatar:function(){return Object(c.a)(this.bot,64,this.$store.getters.avatarFormat)}}),methods:{inviteBot:function(){return this.$axios.post("/api/stats/".concat(this.bot.id,"/invited")).catch(function(t){return console.error(t)}),this.$ga.event("Bot","invite",this.bot.id),window.open(this.bot.inviteUrl)}}},u=(s(488),s(19)),h=Object(u.a)(l,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bot-card extended"},[s("div",{staticClass:"bot-card--header"},[s("figure",{staticClass:"bot-card--avatar"},[s("img",{attrs:{src:t.avatar,alt:t.bot.username+" avatar"}})]),t._v(" "),s("div",[s("p",{staticClass:"bot-card--name"},[t._v(t._s(t.bot.username||t.bot.id))]),t._v(" "),s("p",{staticClass:"bot-card--owner"},[t._v("By "+t._s(t.bot.owner.username)+"#"+t._s(t.bot.owner.discriminator))])])]),t._v(" "),s("div",{staticClass:"bot-card--content"},[s("div",{staticClass:"bot-card--description"},[s("p",{domProps:{innerHTML:t._s(t.markedDescription)}})]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.details.tags.length>0,expression:"details.tags.length > 0"}],staticClass:"bot-card--tags"},[t.bot.tags&&t.bot.tags.length>0?s("div",{staticClass:"bot-card--tagsWrapper"},t._l(t.matchedTags,function(e){return s("b-tooltip",{key:e.type,attrs:{type:"is-dark",label:e.description||"No description",position:"is-top",multilined:"",size:e.description?"is-large":"is-small"}},[s("b-tag",{attrs:{type:"is-primary",size:"is-small"}},[t._v(t._s(e.type))])],1)})):t._e()])]),t._v(" "),s("div",{staticClass:"bot-card--footer"},[s("div",{staticClass:"bot-card--statistics"},[s("p",[s("i",{staticClass:"fa fa-arrow-alt-circle-up"}),t._v(t._s(t.totalWeeklyVotes.toLocaleString())+" Vote"+t._s(1===t.totalWeeklyVotes?"":"s"))]),t._v(" "),s("p",[s("i",{staticClass:"fa fa-user-plus"}),t._v(t._s(t.totalWeeklyInvites.toLocaleString())+" Invite"+t._s(1===t.totalWeeklyInvites?"":"s"))])]),t._v(" "),s("div",{staticClass:"bot-card--actions"},[s("nuxt-link",{staticClass:"button is-primary",attrs:{to:"/bots/"+t.bot.id}},[s("i",{staticClass:"fa fa-address-card"}),s("span",[t._v("Info")])]),t._v(" "),s("a",{staticClass:"button is-primary",on:{click:function(e){return e.preventDefault(),t.inviteBot(e)}}},[s("i",{staticClass:"fa fa-user-plus"})]),t._v(" "),t.isAuthenticated&&(t.user.id===t.bot.owner.id||t.bot.editors&&t.bot.editors.includes(t.user.id))?s("nuxt-link",{staticClass:"button is-warning",attrs:{to:"/bots/"+t.bot.id+"/edit"}},[s("i",{staticClass:"fa fa-cog"})]):t._e()],1)])])},[],!1,null,"7d54b157",null);h.options.__file="ExtendedBotCard.vue";var d,g=h.exports,p=s(382),v=s(15),f={head:{title:"Search Bots on Discord",meta:[{hid:"description",name:"description",content:"Search the best Discord bot list and find the perfect bot for your server."},{hid:"og:title",property:"og:title",content:"Search"},{hid:"og:description",property:"og:description",content:"Search the best Discord bot list and find the perfect bot for your server."}]},components:{ExtendedBotCard:g,Pagination:p.a},asyncData:function(t){var e=t.error,s=t.app,a=t.store,r=a.getters.searchState;if(r)return{searchOptions:JSON.parse(JSON.stringify(r.searchOptions)),page:r.page,showExtra:r.showExtra,allTags:v.b,filteredTags:v.b,bots:r.bots.slice(0),searching:!1,hasSearched:r.hasSearched,seq:0};var i={searchOptions:{name:"",description:"",tags:[],sort:"top"},page:1,showExtra:!0,allTags:v.b,filteredTags:v.b,bots:[],searching:!1,hasSearched:!1,seq:0};return s.$axios.post("/api/bots/search",{limit:30}).then(function(t){return i.hasSearched=!0,i.bots=t.data.results,i.showExtra=30===t.data.results.length,a.commit("searchState",i),i}).catch(function(t){return t&&t.response?(e({statusCode:t.response.status||500,message:t.response.data.message||"Unknown API error"}),i):e({statusCode:500,message:"Unknown error"})})},computed:{showNoResults:function(){return this.hasSearched&&!this.searching&&0===this.bots.length},totalPages:function(){return Math.ceil(this.bots.length/10)},thisPage:function(){var t=1===this.page?0:10*(this.page-1);return this.bots.slice(t,t+10)}},methods:{getFilteredTags:function(t){var e=this;return this.filteredTags=t?this.allTags.filter(function(s){return!e.searchOptions.tags.includes(s)&&s.toLowerCase().indexOf(t)>-1}):this.allTags.filter(function(t){return!e.searchOptions.tags.includes(t)}),this.filteredTags},changePage:function(t){if(!(t===this.page||t<1))return t<=this.totalPages&&(this.page=t,this.$store.commit("searchPage",t)),this.showExtra&&t>=this.totalPages?this.getResults(!0,t):void 0},getResults:(d=r()(regeneratorRuntime.mark(function t(){var e,s,a,r,i,n=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.length>0&&void 0!==n[0]&&n[0],s=n.length>1&&void 0!==n[1]?n[1]:1,!this.searching){t.next=4;break}return t.abrupt("return");case 4:return this.hasSearched=!0,this.searching=!0,t.prev=6,a=Object.assign({},this.searchOptions,{limit:30,skip:e?10*this.totalPages:0}),t.next=10,this.$axios.post("/api/bots/search",a,{timeout:2e4});case 10:r=t.sent,e?r.data.results.length>0?(this.bots=this.bots.concat(r.data.results),this.page=s,r.data.results.length<30&&(this.showExtra=!1)):(this.page=s-1,this.showExtra=!1):(this.bots=r.data.results,this.page=1,this.showExtra=30===r.data.results.length,this.seq++),this.$store.commit("searchState",this),this.searching=!1,t.next=22;break;case 16:return t.prev=16,t.t0=t.catch(6),this.searching=!1,i=null,t.t0&&t.t0.response?t.t0.response.data&&(i=t.t0.response.data.message):console.log(t.t0),t.abrupt("return",this.$dialog.alert({title:"Error",message:i||"Unknown error while attempting to get search results.",type:"is-danger",hasIcon:!0,icon:"times-circle",iconPack:"fa"}));case 22:case"end":return t.stop()}},t,this,[[6,16]])})),function(){return d.apply(this,arguments)})}},b=(s(489),Object(u.a)(f,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"section"},[s("div",{staticClass:"container search-panel"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column queries"},[s("b-field",{attrs:{label:"Bot name"}},[s("b-input",{attrs:{maxlength:35,"has-counter":!1,placeholder:"Input name",icon:"id-card"},model:{value:t.searchOptions.name,callback:function(e){t.$set(t.searchOptions,"name",e)},expression:"searchOptions.name"}})],1),t._v(" "),s("b-field",{attrs:{label:"Description"}},[s("b-input",{attrs:{maxlength:100,"has-counter":!1,placeholder:"Input text",icon:"file-alt"},model:{value:t.searchOptions.description,callback:function(e){t.$set(t.searchOptions,"description",e)},expression:"searchOptions.description"}})],1),t._v(" "),s("b-field",{attrs:{label:"Tags"}},[s("b-taginput",{attrs:{data:t.filteredTags,autocomplete:"","keep-first":"","open-on-focus":"",allowNew:!1,icon:"tags",placeholder:"Select tags"},on:{typing:t.getFilteredTags},model:{value:t.searchOptions.tags,callback:function(e){t.$set(t.searchOptions,"tags",e)},expression:"searchOptions.tags"}})],1)],1),t._v(" "),s("div",{staticClass:"column is-one-quarter-desktop is-one-third search"},[s("b-field",{attrs:{label:"Sort Method"}},[s("b-select",{attrs:{icon:"sort",placeholder:"Select a method",expanded:""},model:{value:t.searchOptions.sort,callback:function(e){t.$set(t.searchOptions,"sort",e)},expression:"searchOptions.sort"}},[s("option",{attrs:{value:"top"}},[t._v("Most votes")]),t._v(" "),s("option",{attrs:{value:"new"}},[t._v("Newest")])])],1),t._v(" "),s("button",{staticClass:"button is-success",on:{click:function(e){t.getResults()}}},[s("b-icon",{attrs:{icon:"search",size:"is-small"}}),t._v("Find Bots")],1)],1)])]),t._v(" "),s("div",{staticClass:"container search-results"},[s("article",{directives:[{name:"show",rawName:"v-show",value:t.showNoResults,expression:"showNoResults"}],staticClass:"message is-info"},[s("div",{staticClass:"message-body"},[t._v("\n\t\t\t\tThere are no bots matching your search. Try making a less-specific search to get results.\n\t\t\t")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.bots.length>0,expression:"bots.length > 0"}],staticClass:"pagination-wrapper"},[s("pagination",{attrs:{pages:t.totalPages,currentPage:t.page,showExtra:t.showExtra},on:{change:t.changePage}}),t._v(" "),s("div",{staticClass:"bot-list"},t._l(t.thisPage,function(e){return s("extended-bot-card",{key:e.id+"-"+t.seq,attrs:{bot:e,search:t.searchOptions}})})),t._v(" "),s("pagination",{attrs:{pages:t.totalPages,currentPage:t.page,showExtra:t.showExtra},on:{change:t.changePage}})],1)])])},[],!1,null,"7c5ce0fd",null));b.options.__file="search.vue";e.default=b.exports},171:function(t,e,s){"use strict";s.d(e,"a",function(){return a}),s.d(e,"b",function(){return i}),s.d(e,"c",function(){return n});s(26),s(1),s(34);function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"png";return"webp"===s&&(e*=2),t&&t.avatarHash?"https://cdn.discordapp.com/avatars/".concat(t.id,"/").concat(t.avatarHash,".").concat(s,"?size=").concat(e):"https://cdn.discordapp.com/embed/avatars/0.png"}var r={"<":"&lt;",">":"&gt;","&":"&amp;"};function i(t){return t.replace(/(<|>|&)/g,function(t){return r[t]})}function n(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}},303:function(t,e,s){},312:function(t,e,s){"use strict";var a=s(3),r=s(16),i=s(21),n=s(97),o=s(48),c=s(10),l=s(49).f,u=s(64).f,h=s(9).f,d=s(313).trim,g=a.Number,p=g,v=g.prototype,f="Number"==i(s(63)(v)),b="trim"in String.prototype,m=function(t){var e=o(t,!1);if("string"==typeof e&&e.length>2){var s,a,r,i=(e=b?e.trim():d(e,3)).charCodeAt(0);if(43===i||45===i){if(88===(s=e.charCodeAt(2))||120===s)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+e}for(var n,c=e.slice(2),l=0,u=c.length;l<u;l++)if((n=c.charCodeAt(l))<48||n>r)return NaN;return parseInt(c,a)}}return+e};if(!g(" 0o1")||!g("0b1")||g("+0x1")){g=function(t){var e=arguments.length<1?0:t,s=this;return s instanceof g&&(f?c(function(){v.valueOf.call(s)}):"Number"!=i(s))?n(new p(m(e)),s,g):m(e)};for(var _,w=s(6)?l(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;w.length>x;x++)r(p,_=w[x])&&!r(g,_)&&h(g,_,u(p,_));g.prototype=v,v.constructor=g,s(11)(a,"Number",g)}},313:function(t,e,s){var a=s(5),r=s(20),i=s(10),n=s(314),o="["+n+"]",c=RegExp("^"+o+o+"*"),l=RegExp(o+o+"*$"),u=function(t,e,s){var r={},o=i(function(){return!!n[t]()||"​"!="​"[t]()}),c=r[t]=o?e(h):n[t];s&&(r[s]=c),a(a.P+a.F*o,"String",r)},h=u.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(l,"")),t};t.exports=u},314:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},342:function(t,e,s){},343:function(t,e,s){"use strict";var a=s(303);s.n(a).a},344:function(t,e,s){},382:function(t,e,s){"use strict";s(312);var a={props:{pages:{type:Number,required:!0},currentPage:{type:Number,required:!0},showExtra:{type:Boolean,default:!1}},methods:{goToPage:function(t){return this.$emit("change",t)}}},r=(s(343),s(19)),i=Object(r.a)(a,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bots-pagination"},[s("button",{staticClass:"button",attrs:{disabled:t.currentPage<2},on:{click:function(e){t.goToPage(1)}}},[s("b-icon",{attrs:{icon:"angle-double-left",size:"is-small"}})],1),t._v(" "),s("button",{staticClass:"button",attrs:{disabled:t.currentPage<2},on:{click:function(e){t.goToPage(t.currentPage-1)}}},[s("b-icon",{attrs:{icon:"angle-left",size:"is-small"}})],1),t._v(" "),s("div",{staticClass:"bots-pagination--pages"},[s("button",{directives:[{name:"show",rawName:"v-show",value:t.currentPage>2,expression:"currentPage > 2"}],staticClass:"button",on:{click:function(e){t.goToPage(t.currentPage-2)}}},[t._v(t._s(t.currentPage-2))]),t._v(" "),s("button",{directives:[{name:"show",rawName:"v-show",value:t.currentPage>1,expression:"currentPage > 1"}],staticClass:"button",on:{click:function(e){t.goToPage(t.currentPage-1)}}},[t._v(t._s(t.currentPage-1))]),t._v(" "),s("button",{staticClass:"button is-primary"},[t._v(t._s(t.currentPage))]),t._v(" "),s("button",{directives:[{name:"show",rawName:"v-show",value:t.showExtra||t.currentPage<t.pages,expression:"showExtra || currentPage < pages"}],staticClass:"button",on:{click:function(e){t.goToPage(t.currentPage+1)}}},[t._v(t._s(t.currentPage+1))]),t._v(" "),s("button",{directives:[{name:"show",rawName:"v-show",value:t.currentPage+1<t.pages,expression:"currentPage + 1 < pages"}],staticClass:"button",on:{click:function(e){t.goToPage(t.currentPage+2)}}},[t._v(t._s(t.currentPage+2))])]),t._v(" "),s("button",{staticClass:"button",attrs:{disabled:!t.showExtra&&t.currentPage===t.pages},on:{click:function(e){t.goToPage(t.currentPage+1)}}},[s("b-icon",{attrs:{icon:"angle-right",size:"is-small"}})],1),t._v(" "),s("button",{staticClass:"button",attrs:{disabled:!t.showExtra&&t.currentPage===t.pages},on:{click:function(e){t.goToPage(t.showExtra?t.pages+1:t.pages)}}},[s("b-icon",{attrs:{icon:"angle-double-right",size:"is-small"}})],1)])},[],!1,null,"7317bead",null);i.options.__file="Pagination.vue";e.a=i.exports},486:function(t,e,s){"use strict";var a=s(22),r=s(5),i=s(37),n=s(101),o=s(102),c=s(36),l=s(487),u=s(103);r(r.S+r.F*!s(104)(function(t){Array.from(t)}),"Array",{from:function(t){var e,s,r,h,d=i(t),g="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,f=void 0!==v,b=0,m=u(d);if(f&&(v=a(v,p>2?arguments[2]:void 0,2)),null==m||g==Array&&o(m))for(s=new g(e=c(d.length));e>b;b++)l(s,b,f?v(d[b],b):d[b]);else for(h=m.call(d),s=new g;!(r=h.next()).done;b++)l(s,b,f?n(h,v,[r.value,b],!0):r.value);return s.length=b,s}})},487:function(t,e,s){"use strict";var a=s(9),r=s(35);t.exports=function(t,e,s){e in t?a.f(t,e,r(0,s)):t[e]=s}},488:function(t,e,s){"use strict";var a=s(342);s.n(a).a},489:function(t,e,s){"use strict";var a=s(344);s.n(a).a}}]);